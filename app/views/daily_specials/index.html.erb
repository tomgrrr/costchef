<%# Page header %>
<div class="page-header">
  <div class="d-flex align-items-center gap-3">
    <h1 class="page-title">Plats du jour</h1>
    <span class="mono" style="color: var(--sl-400);"><%= @meats.size + @fishes.size + @sides.size %> entrée(s)</span>
  </div>
</div>

<div style="padding: 24px;">

  <%# 3-column grid: Viandes / Poissons / Accompagnements %>
  <div class="row g-3">

    <%= render 'category_column', category: 'meat',  entries: @meats,  average: @meat_average,
               icon: 'bi-fire',    title: 'Viandes',          placeholder: 'Ex: Entrecôte, Poulet rôti...' %>

    <%= render 'category_column', category: 'fish',  entries: @fishes, average: @fish_average,
               icon: 'bi-water',   title: 'Poissons',         placeholder: 'Ex: Saumon, Cabillaud...' %>

    <%= render 'category_column', category: 'side',  entries: @sides,  average: @side_average,
               icon: 'bi-basket2', title: 'Accompagnements',  placeholder: 'Ex: Riz, Gratin dauphinois...' %>

    <%# Tarification recap card — spans all 3 columns %>
    <div class="col-12">
    <div class="section-card">
      <div class="section-header">
        <h2 class="section-title">Coût et Tarif plat du jour</h2>
      </div>
      <div style="padding: 16px 20px;">
        <div class="summary-row">
          <span class="s-label">Viande + Accompagnement — coût</span>
          <span class="s-value"><%= number_with_precision(@meat_average + @side_average, precision: 2) %> €</span>
        </div>
        <div class="summary-row">
          <span class="s-label">Viande + Accompagnement — prix conseillé</span>
          <span class="s-value accent"><%= number_with_precision((@meat_average + @side_average) * current_user.markup_coefficient, precision: 2) %> €</span>
        </div>
        <div class="summary-row">
          <span class="s-label">Poisson + Accompagnement — coût</span>
          <span class="s-value"><%= number_with_precision(@fish_average + @side_average, precision: 2) %> €</span>
        </div>
        <div class="summary-row">
          <span class="s-label">Poisson + Accompagnement — prix conseillé</span>
          <span class="s-value accent"><%= number_with_precision((@fish_average + @side_average) * current_user.markup_coefficient, precision: 2) %> €</span>
        </div>
        <div class="summary-row" style="border-bottom: none; margin-top: 4px;">
          <span class="s-label">Coefficient appliqué</span>
          <span class="s-value muted">×<%= number_with_precision(current_user.markup_coefficient, precision: 1) %></span>
        </div>
      </div>
    </div>
    </div>

  </div>

</div>
